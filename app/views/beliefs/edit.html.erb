<h2>Belief System</h2>

<% semantic_form_for :belief, :url => { :action => "update" } do |f| %>
  <table id="beliefs" class="ratings round">
    <th>Dimension Name</th>
    <th><center>Your ideal value</center></th>
    <th><center>How important?</center></th>
    <% Dimension.opinion_dimensions.each do |dim| %>
      <tr>
        <td>
          <%= dim.name %> <%= edit_delete_dimension(dim) %>
          <% ideal_key = "ideals[#{dim.id}]" %>
          <% weight_key = "weights[#{dim.id}]" %>
          <% belief = Belief.find_by_opinion_id_and_user_id dim.valuable, current_user %>
          <% ideal = belief.ideal if belief %>
          <% weight = belief.weight if belief %>
        </td>
        <td>
          <center>
            <%= send(dim.bool? ? :show_booler : :show_rater, dim, ideal_key, ideal) %>
          </center>
        </td>
        <td>
          <center>
            <span class="indicator">I care not</span>
            <% for i in 1..5 %>
              <%= radio_button_tag weight_key, i, weight ? weight == i : false %>
            <% end %>
            <span class="indicator">Vital</span>
          </center>
        </td>
      </tr>
    <% end %>
  </table>
  <%= f.submit "Update Beliefs" %>
<% end %>
